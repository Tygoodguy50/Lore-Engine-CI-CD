load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")

go_library(
    name = "gin",
    srcs = [
        "auth.go",
        "context.go",
        "debug.go",
        "deprecated.go",
        "doc.go",
        "errors.go",
        "fs.go",
        "gin.go",
        "logger.go",
        "mode.go",
        "path.go",
        "recovery.go",
        "response_writer.go",
        "routergroup.go",
        "test_helpers.go",
        "tree.go",
        "utils.go",
        "version.go",
    ],
    importpath = "github.com/gin-gonic/gin",
    visibility = ["//visibility:public"],
    deps = [
        "//binding",
        "//internal/bytesconv",
        "//internal/json",
        "//render",
        "@com_github_gin_contrib_sse//:sse",
        "@com_github_mattn_go_isatty//:go-isatty",
        "@org_golang_x_net//http2",
        "@org_golang_x_net//http2/h2c",
    ],
)

alias(
    name = "go_default_library",
    actual = ":gin",
    visibility = ["//visibility:public"],
)

go_test(
    name = "gin_test",
    srcs = [
        "auth_test.go",
        "benchmarks_test.go",
        "context_1.18_test.go",
        "context_1.19_test.go",
        "context_test.go",
        "debug_test.go",
        "deprecated_test.go",
        "errors_test.go",
        "gin_integration_test.go",
        "gin_test.go",
        "githubapi_test.go",
        "logger_test.go",
        "middleware_test.go",
        "mode_test.go",
        "path_test.go",
        "recovery_test.go",
        "response_writer_test.go",
        "routergroup_test.go",
        "routes_test.go",
        "tree_test.go",
        "utils_test.go",
    ],
    embed = [":gin"],
    deps = [
        "//binding",
        "//internal/json",
        "//testdata/protoexample",
        "@com_github_gin_contrib_sse//:sse",
        "@com_github_stretchr_testify//assert:go_default_library",
        "@org_golang_google_protobuf//proto",
        "@org_golang_x_net//http2",
    ],
)
